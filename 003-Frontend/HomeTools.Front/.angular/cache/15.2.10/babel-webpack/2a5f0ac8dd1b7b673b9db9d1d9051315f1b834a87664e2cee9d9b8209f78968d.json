{"ast":null,"code":"import { CartaoMapper } from './../../../../mappers/financas/CartaoMapper';\nimport { TipoAlertaEnum } from 'src/app/enums/tipoAlertaEnum';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/Financas/cartao/cartao.service\";\nimport * as i2 from \"src/app/services/feedback.service\";\nimport * as i3 from \"src/app/services/resposta-api.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"../../../paginador/paginador/paginador.component\";\nimport * as i7 from \"../excluir-cartao/excluir-cartao.component\";\nfunction PainelCartoesComponent_tr_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 27)(2, \"div\", 28)(3, \"span\", 29)(4, \"button\", 30);\n    i0.ɵɵelement(5, \"img\", 31);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"span\", 29)(7, \"button\", 32);\n    i0.ɵɵelement(8, \"img\", 33);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"span\", 29)(10, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function PainelCartoesComponent_tr_38_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const cartao_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.exibirModalExcluir(cartao_r1));\n    });\n    i0.ɵɵelement(11, \"img\", 35);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\", 27);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\", 27);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const cartao_r1 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"btnEditar\", cartao_r1.Id, \"\")(\"routerLink\", \"editar-cartao/\", cartao_r1.Id, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"btnFaturas\", cartao_r1.Id, \"\")(\"routerLink\", \"faturas-cartao/\", cartao_r1.Id, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"btnExcluir\", cartao_r1.Id, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(cartao_r1.Nome);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cartao_r1.DiaVencimento);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cartao_r1.DiaFechamento);\n  }\n}\nexport class PainelCartoesComponent {\n  constructor(cartaoService, feedbackService, respostaApiService) {\n    this.cartaoService = cartaoService;\n    this.feedbackService = feedbackService;\n    this.respostaApiService = respostaApiService;\n    this.Ordem = '';\n    this.NomeCampo = '';\n    this.DadosPaginador = {\n      PaginaAtual: 1,\n      ItensPorPagina: 15,\n      TotalItens: 0\n    };\n    this.DadosPaginados = {};\n    this.CartaoAcao = {};\n    this.Cartoes = [];\n  }\n  ngOnInit() {\n    this.cartaoService.listar().subscribe({\n      next: respostaApi => {\n        respostaApi.valor.forEach(cartao => {\n          this.Cartoes.push(CartaoMapper.CartaoDtoToCartao(cartao));\n        });\n        this.ordenarCartoes();\n      },\n      error: err => {\n        let dadosFeedback = {\n          Id: \"feedback1\",\n          TipoAlerta: TipoAlertaEnum.Erro,\n          Titulo: \"Erro!\",\n          Mensagem: \"Não foi possível obter os cartões.\"\n        };\n        this.feedbackService.gerarFeedbackAlerta(dadosFeedback);\n      }\n    });\n  }\n  buscarCartoes() {\n    let busca = document.getElementById('txtBusca').value;\n    this.Cartoes = [];\n    this.cartaoService.buscar(busca).subscribe({\n      next: respostaApi => {\n        respostaApi.valor.forEach(cartao => {\n          this.Cartoes.push(CartaoMapper.CartaoDtoToCartao(cartao));\n        });\n        this.ordenarCartoes();\n      },\n      error: err => {\n        this.respostaApiService.tratarRespostaApi(err);\n      }\n    });\n  }\n  ordenarCartoes(nomeCampo) {\n    if (nomeCampo == this.NomeCampo) {\n      if (this.Ordem == 'desc') {\n        this.Ordem = 'asc';\n      } else if (this.Ordem == 'asc') {\n        this.Ordem = '';\n        this.NomeCampo = '';\n        nomeCampo = '';\n      }\n    } else {\n      this.Ordem = '';\n    }\n    switch (nomeCampo) {\n      case 'Nome':\n        this.NomeCampo = 'Nome';\n        if (this.Ordem == 'asc') {\n          this.Cartoes.sort((a, b) => a.Nome.localeCompare(b.Nome, 'pt-BR'));\n        } else {\n          this.Ordem = 'desc';\n          this.Cartoes.sort((a, b) => b.Nome.localeCompare(a.Nome, 'pt-BR'));\n        }\n        break;\n      case 'DiaVencimento':\n        this.NomeCampo = 'DiaVencimento';\n        if (this.Ordem == 'asc') {\n          this.Cartoes.sort((a, b) => a.DiaVencimento - b.DiaVencimento);\n        } else {\n          this.Ordem = 'desc';\n          this.Cartoes.sort((a, b) => b.DiaVencimento - a.DiaVencimento);\n        }\n        break;\n      case 'DiaFechamento':\n        this.NomeCampo = 'DiaFechamento';\n        if (this.Ordem == 'asc') {\n          this.Cartoes.sort((a, b) => a.DiaFechamento - b.DiaFechamento);\n        } else {\n          this.Ordem = 'desc';\n          this.Cartoes.sort((a, b) => b.DiaFechamento - a.DiaFechamento);\n        }\n        break;\n      default:\n        this.NomeCampo = '';\n        this.Cartoes.sort((a, b) => b.Id - a.Id);\n        break;\n    }\n    this.tratarIconeOrdenacao();\n    this.DadosPaginador.PaginaAtual = 1;\n    this.paginarCartoes();\n  }\n  tratarIconeOrdenacao() {\n    let imgAsc = \"<img src=\\\"../../../../assets/img/asc.png\\\" >\";\n    let imgDesc = \"<img src=\\\"../../../../assets/img/desc.png\\\" >\";\n    let imgNome = document.getElementById('imgNome');\n    let imgDiaVencimento = document.getElementById('imgDiaVencimento');\n    let imgDiaFechamento = document.getElementById('imgDiaFechamento');\n    imgNome.innerHTML = '';\n    imgDiaVencimento.innerHTML = '';\n    imgDiaFechamento.innerHTML = '';\n    switch (this.NomeCampo) {\n      case 'Nome':\n        if (this.Ordem == 'asc') {\n          imgNome.innerHTML = imgAsc;\n        } else {\n          imgNome.innerHTML = imgDesc;\n        }\n        break;\n      case 'DiaVencimento':\n        if (this.Ordem == 'asc') {\n          imgDiaVencimento.innerHTML = imgAsc;\n        } else {\n          imgDiaVencimento.innerHTML = imgDesc;\n        }\n        break;\n      case 'DiaFechamento':\n        if (this.Ordem == 'asc') {\n          imgDiaFechamento.innerHTML = imgAsc;\n        } else {\n          imgDiaFechamento.innerHTML = imgDesc;\n        }\n        break;\n      default:\n        break;\n    }\n  }\n  paginarCartoes() {\n    this.DadosPaginados.Pagina = this.DadosPaginador.PaginaAtual;\n    this.DadosPaginados.ItensPorPagina = this.DadosPaginador.ItensPorPagina;\n    this.DadosPaginados.TotalItens = this.DadosPaginador.TotalItens;\n    let itensPagina = [];\n    let pagina = 1;\n    this.Cartoes.forEach(item => {\n      itensPagina.push({\n        Pagina: pagina,\n        Item: item\n      });\n      if (itensPagina.length == this.DadosPaginados.ItensPorPagina * pagina) {\n        pagina++;\n      }\n    });\n    this.DadosPaginados.Itens = itensPagina.filter(item => item.Pagina == this.DadosPaginados.Pagina).map(item => item.Item);\n  }\n  exibirModalExcluir(Cartao) {\n    this.CartaoAcao = Cartao;\n    document.getElementById('modalExcluirCartao').style.display = 'block';\n  }\n  receiveMessage($event) {\n    this.DadosPaginador = $event;\n    this.paginarCartoes();\n  }\n  static #_ = this.ɵfac = function PainelCartoesComponent_Factory(t) {\n    return new (t || PainelCartoesComponent)(i0.ɵɵdirectiveInject(i1.CartaoService), i0.ɵɵdirectiveInject(i2.FeedbackService), i0.ɵɵdirectiveInject(i3.RespostaApiService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PainelCartoesComponent,\n    selectors: [[\"app-painel-cartoes\"]],\n    decls: 42,\n    vars: 3,\n    consts: [[1, \"container\", \"main\"], [1, \"titulo-pagina\", \"ff-verdana\"], [1, \"menu-painel\", \"conteudo-pagina\"], [1, \"row\"], [1, \"col\", \"col-flexible\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Buscar\", \"name\", \"Busca\", \"id\", \"txtBusca\", 1, \"form-control\", 3, \"keydown.enter\", \"keydown.return\"], [\"title\", \"Buscar\", \"id\", \"btnBuscar\", 1, \"btn\", 3, \"click\"], [\"src\", \"../../../../assets/img/lupa-icon.png\"], [\"title\", \"Novo Cart\\u00E3o\", \"id\", \"btnNovoCartao\", \"routerLink\", \"incluir-cartao\", 1, \"btn\"], [\"src\", \"../../../../assets/img/plus-icon.png\"], [1, \"conteudo-pagina\", \"div-tabela\"], [1, \"table\", \"ff-verdana\"], [\"id\", \"thAcoes\", 1, \"campo-ordenacao\", 3, \"click\"], [1, \"titulo-tabela\"], [1, \"nome-campo\"], [\"id\", \"imgAcoes\", 1, \"img-ordenacao\"], [\"id\", \"thNome\", 1, \"campo-ordenacao\", 3, \"click\"], [\"id\", \"imgNome\", 1, \"img-ordenacao\"], [\"id\", \"thDiaVencimento\", 1, \"campo-ordenacao\", 3, \"click\"], [\"id\", \"imgDiaVencimento\", 1, \"img-ordenacao\"], [\"id\", \"thDiaFechamento\", 1, \"campo-ordenacao\", 3, \"click\"], [\"id\", \"imgDiaFechamento\", 1, \"img-ordenacao\"], [4, \"ngFor\", \"ngForOf\"], [1, \"paginador\"], [3, \"DadosPaginador\", \"messageEvent\"], [3, \"Cartao\"], [1, \"center\"], [1, \"acoes\"], [1, \"acoes-item\"], [\"title\", \"Editar\", 1, \"btn\", \"btn-sm\", 3, \"id\", \"routerLink\"], [\"src\", \"../../../../assets/img/pencil-icon.png\"], [\"title\", \"Faturas\", 1, \"btn\", \"btn-sm\", 3, \"id\", \"routerLink\"], [\"src\", \"../../../../assets/img/fatura-icon.png\"], [\"title\", \"Excluir\", 1, \"btn\", \"btn-sm\", 3, \"id\", \"click\"], [\"src\", \"../../../../assets/img/lixeira-icon.png\"]],\n    template: function PainelCartoesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n        i0.ɵɵtext(3, \"Cart\\u00F5es\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\", 3)(6, \"div\", 4)(7, \"div\", 5)(8, \"input\", 6);\n        i0.ɵɵlistener(\"keydown.enter\", function PainelCartoesComponent_Template_input_keydown_enter_8_listener() {\n          return ctx.buscarCartoes();\n        })(\"keydown.return\", function PainelCartoesComponent_Template_input_keydown_return_8_listener() {\n          return ctx.buscarCartoes();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"span\")(10, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function PainelCartoesComponent_Template_button_click_10_listener() {\n          return ctx.buscarCartoes();\n        });\n        i0.ɵɵelement(11, \"img\", 8);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(12, \"div\", 4)(13, \"button\", 9);\n        i0.ɵɵelement(14, \"img\", 10);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(15, \"div\", 11)(16, \"table\", 12)(17, \"tr\")(18, \"th\", 13);\n        i0.ɵɵlistener(\"click\", function PainelCartoesComponent_Template_th_click_18_listener() {\n          return ctx.ordenarCartoes(\"Acoes\");\n        });\n        i0.ɵɵelementStart(19, \"div\", 14)(20, \"span\", 15);\n        i0.ɵɵtext(21, \"A\\u00E7\\u00F5es\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(22, \"span\", 16);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"th\", 17);\n        i0.ɵɵlistener(\"click\", function PainelCartoesComponent_Template_th_click_23_listener() {\n          return ctx.ordenarCartoes(\"Nome\");\n        });\n        i0.ɵɵelementStart(24, \"div\", 14)(25, \"span\", 15);\n        i0.ɵɵtext(26, \"Nome\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"span\", 18);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(28, \"th\", 19);\n        i0.ɵɵlistener(\"click\", function PainelCartoesComponent_Template_th_click_28_listener() {\n          return ctx.ordenarCartoes(\"DiaVencimento\");\n        });\n        i0.ɵɵelementStart(29, \"div\", 14)(30, \"span\", 15);\n        i0.ɵɵtext(31, \"Dia Vencimento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(32, \"span\", 20);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(33, \"th\", 21);\n        i0.ɵɵlistener(\"click\", function PainelCartoesComponent_Template_th_click_33_listener() {\n          return ctx.ordenarCartoes(\"DiaFechamento\");\n        });\n        i0.ɵɵelementStart(34, \"div\", 14)(35, \"span\", 15);\n        i0.ɵɵtext(36, \"Dia Fechamento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(37, \"span\", 22);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(38, PainelCartoesComponent_tr_38_Template, 18, 8, \"tr\", 23);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(39, \"div\", 24)(40, \"app-paginador\", 25);\n        i0.ɵɵlistener(\"messageEvent\", function PainelCartoesComponent_Template_app_paginador_messageEvent_40_listener($event) {\n          return ctx.receiveMessage($event);\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(41, \"app-excluir-cartao\", 26);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(38);\n        i0.ɵɵproperty(\"ngForOf\", ctx.DadosPaginados.Itens);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"DadosPaginador\", ctx.DadosPaginador);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"Cartao\", ctx.CartaoAcao);\n      }\n    },\n    dependencies: [i4.NgForOf, i5.RouterLink, i6.PaginadorComponent, i7.ExcluirCartaoComponent],\n    styles: [\".div-tabela[_ngcontent-%COMP%]{\\r\\n  display: flex;\\r\\n  padding-bottom: 0.5rem;\\r\\n  overflow-y: auto;\\r\\n}\\r\\n.div-tabela[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%] {\\r\\n  border-top: none;\\r\\n  border-left: none;\\r\\n  border-right: none;\\r\\n  border-radius: 0;\\r\\n}\\r\\n#thAcoes[_ngcontent-%COMP%] {\\r\\n  min-width: 80px;\\r\\n}\\r\\n#thNome[_ngcontent-%COMP%] {\\r\\n  min-width: 100px;\\r\\n}\\r\\n.acoes[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n}\\r\\n.acoes-item[_ngcontent-%COMP%] {\\r\\n  padding: 0 2px 0 2px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9maW5hbmNhcy9jYXJ0b2VzL3BhaW5lbC1jYXJ0b2VzL3BhaW5lbC1jYXJ0b2VzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLGdCQUFnQjtBQUNsQjtBQUNBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtFQUNqQixrQkFBa0I7RUFDbEIsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxlQUFlO0FBQ2pCO0FBQ0E7RUFDRSxnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLGFBQWE7RUFDYix1QkFBdUI7RUFDdkIsbUJBQW1CO0FBQ3JCO0FBQ0E7RUFDRSxvQkFBb0I7QUFDdEIiLCJzb3VyY2VzQ29udGVudCI6WyIuZGl2LXRhYmVsYXtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIHBhZGRpbmctYm90dG9tOiAwLjVyZW07XHJcbiAgb3ZlcmZsb3cteTogYXV0bztcclxufVxyXG4uZGl2LXRhYmVsYSAudGFibGUge1xyXG4gIGJvcmRlci10b3A6IG5vbmU7XHJcbiAgYm9yZGVyLWxlZnQ6IG5vbmU7XHJcbiAgYm9yZGVyLXJpZ2h0OiBub25lO1xyXG4gIGJvcmRlci1yYWRpdXM6IDA7XHJcbn1cclxuI3RoQWNvZXMge1xyXG4gIG1pbi13aWR0aDogODBweDtcclxufVxyXG4jdGhOb21lIHtcclxuICBtaW4td2lkdGg6IDEwMHB4O1xyXG59XHJcbi5hY29lcyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcbi5hY29lcy1pdGVtIHtcclxuICBwYWRkaW5nOiAwIDJweCAwIDJweDtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["CartaoMapper","TipoAlertaEnum","i0","PainelCartoesComponent","constructor","cartaoService","feedbackService","respostaApiService","PaginaAtual","ItensPorPagina","TotalItens","ngOnInit","listar","subscribe","next","respostaApi","valor","forEach","cartao","Cartoes","push","CartaoDtoToCartao","ordenarCartoes","error","err","dadosFeedback","Id","TipoAlerta","Erro","Titulo","Mensagem","gerarFeedbackAlerta","buscarCartoes","busca","document","getElementById","value","buscar","tratarRespostaApi","nomeCampo","NomeCampo","Ordem","sort","a","b","Nome","localeCompare","DiaVencimento","DiaFechamento","tratarIconeOrdenacao","DadosPaginador","paginarCartoes","imgAsc","imgDesc","imgNome","imgDiaVencimento","imgDiaFechamento","innerHTML","DadosPaginados","Pagina","itensPagina","pagina","item","Item","length","Itens","filter","map","exibirModalExcluir","Cartao","CartaoAcao","style","display","receiveMessage","$event","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\GIT\\HomeTools\\003-Frontend\\HomeTools.Front\\src\\app\\components\\financas\\cartoes\\painel-cartoes\\painel-cartoes.component.ts","D:\\GIT\\HomeTools\\003-Frontend\\HomeTools.Front\\src\\app\\components\\financas\\cartoes\\painel-cartoes\\painel-cartoes.component.html"],"sourcesContent":["import { CartaoMapper } from './../../../../mappers/financas/CartaoMapper';\nimport { Component, OnInit } from '@angular/core';\nimport { ReadCartaoDto } from 'src/app/dto/financas/cartoes/readCartaoDto';\nimport { TipoAlertaEnum } from 'src/app/enums/tipoAlertaEnum';\nimport { DadosFeedbackAlerta } from 'src/app/interfaces/dadosFeedbackAlerta';\nimport { Cartao } from 'src/app/interfaces/financas/Cartao';\nimport { DadosPaginador } from 'src/app/interfaces/paginacao/dadosPaginador';\nimport { DadosPaginados } from 'src/app/interfaces/paginacao/dadosPaginados';\nimport { ItemPagina } from 'src/app/interfaces/paginacao/itemPagina';\nimport { CartaoService } from 'src/app/services/Financas/cartao/cartao.service';\nimport { FeedbackService } from 'src/app/services/feedback.service';\nimport { RespostaApiService } from 'src/app/services/resposta-api.service';\n\n@Component({\n  selector: 'app-painel-cartoes',\n  templateUrl: './painel-cartoes.component.html',\n  styleUrls: ['./painel-cartoes.component.css']\n})\nexport class PainelCartoesComponent implements OnInit {\n\n  Ordem: string = '';\n  NomeCampo: string = '';\n\n  DadosPaginador: DadosPaginador = {\n    PaginaAtual: 1,\n    ItensPorPagina: 15,\n    TotalItens: 0,\n  };\n\n  DadosPaginados: DadosPaginados<Cartao> = { } as DadosPaginados<Cartao>;\n  CartaoAcao: Cartao = { } as Cartao;\n  Cartoes: Cartao[] = [];\n\n  constructor(\n    private cartaoService: CartaoService,\n    private feedbackService: FeedbackService,\n    private respostaApiService: RespostaApiService,\n  ) { }\n\n  ngOnInit(): void {\n    this.cartaoService.listar().subscribe({\n      next: (respostaApi) => {\n        respostaApi.valor.forEach((cartao: ReadCartaoDto) => {\n          this.Cartoes.push(CartaoMapper.CartaoDtoToCartao(cartao));\n        });\n        this.ordenarCartoes();\n      }, error: (err) => {\n        let dadosFeedback = {\n          Id: \"feedback1\",\n          TipoAlerta: TipoAlertaEnum.Erro,\n          Titulo: \"Erro!\",\n          Mensagem: \"Não foi possível obter os cartões.\"\n        } as DadosFeedbackAlerta;\n        this.feedbackService.gerarFeedbackAlerta(dadosFeedback);\n      }\n    });\n  }\n\n  buscarCartoes() {\n    let busca = (document.getElementById('txtBusca') as HTMLInputElement).value;\n    this.Cartoes = [];\n    this.cartaoService.buscar(busca).subscribe({\n      next: (respostaApi) => {\n        respostaApi.valor.forEach((cartao: ReadCartaoDto) => {\n          this.Cartoes.push(CartaoMapper.CartaoDtoToCartao(cartao));\n        });\n        this.ordenarCartoes();\n      }, error: (err) => {\n        this.respostaApiService.tratarRespostaApi(err);\n      }\n    });\n  }\n\n  ordenarCartoes(nomeCampo?: string) {\n    if (nomeCampo == this.NomeCampo) {\n      if (this.Ordem == 'desc') {\n        this.Ordem = 'asc';\n      } else if (this.Ordem == 'asc') {\n        this.Ordem = '';\n        this.NomeCampo = '';\n        nomeCampo = '';\n      }\n    } else {\n      this.Ordem = '';\n    }\n\n    switch (nomeCampo) {\n      case 'Nome':\n        this.NomeCampo = 'Nome';\n        if (this.Ordem == 'asc') {\n          this.Cartoes.sort((a, b) => a.Nome.localeCompare(b.Nome, 'pt-BR'));\n        } else {\n          this.Ordem = 'desc';\n          this.Cartoes.sort((a, b) => b.Nome.localeCompare(a.Nome, 'pt-BR'));\n        }\n        break;\n      case 'DiaVencimento':\n        this.NomeCampo = 'DiaVencimento';\n        if (this.Ordem == 'asc') {\n          this.Cartoes.sort((a, b) => a.DiaVencimento - b.DiaVencimento);\n        } else {\n          this.Ordem = 'desc';\n          this.Cartoes.sort((a, b) => b.DiaVencimento - a.DiaVencimento);\n        }\n        break;\n      case 'DiaFechamento':\n        this.NomeCampo = 'DiaFechamento';\n        if (this.Ordem == 'asc') {\n          this.Cartoes.sort((a, b) => a.DiaFechamento - b.DiaFechamento);\n        } else {\n          this.Ordem = 'desc';\n          this.Cartoes.sort((a, b) => b.DiaFechamento - a.DiaFechamento);\n        }\n        break;\n      default:\n        this.NomeCampo = '';\n        this.Cartoes.sort((a, b) => b.Id - a.Id);\n        break;\n      }\n    this.tratarIconeOrdenacao();\n    this.DadosPaginador.PaginaAtual = 1;\n    this.paginarCartoes();\n  }\n\n  tratarIconeOrdenacao() {\n    let imgAsc = \"<img src=\\\"../../../../assets/img/asc.png\\\" >\";\n    let imgDesc = \"<img src=\\\"../../../../assets/img/desc.png\\\" >\";\n    let imgNome = document.getElementById('imgNome');\n    let imgDiaVencimento = document.getElementById('imgDiaVencimento');\n    let imgDiaFechamento = document.getElementById('imgDiaFechamento');\n\n    imgNome!.innerHTML = '';\n    imgDiaVencimento!.innerHTML = '';\n    imgDiaFechamento!.innerHTML = '';\n\n    switch (this.NomeCampo) {\n      case 'Nome':\n        if (this.Ordem == 'asc') {\n          imgNome!.innerHTML = imgAsc;\n        } else {\n          imgNome!.innerHTML = imgDesc;\n        }\n        break;\n      case 'DiaVencimento':\n        if (this.Ordem == 'asc') {\n          imgDiaVencimento!.innerHTML = imgAsc;\n        } else {\n          imgDiaVencimento!.innerHTML = imgDesc;\n        }\n        break;\n      case 'DiaFechamento':\n        if (this.Ordem == 'asc') {\n          imgDiaFechamento!.innerHTML = imgAsc;\n        }\n        else {\n          imgDiaFechamento!.innerHTML = imgDesc;\n        }\n        break;\n      default:\n        break;\n      }\n  }\n\n  paginarCartoes() {\n    this.DadosPaginados.Pagina = this.DadosPaginador.PaginaAtual;\n    this.DadosPaginados.ItensPorPagina = this.DadosPaginador.ItensPorPagina;\n    this.DadosPaginados.TotalItens = this.DadosPaginador.TotalItens;\n\n    let itensPagina: ItemPagina<Cartao>[] = [];\n    let pagina = 1;\n    this.Cartoes.forEach(item => {\n      itensPagina.push({  Pagina: pagina, Item: item });\n      if (itensPagina.length == this.DadosPaginados.ItensPorPagina * pagina) {\n        pagina++;\n      }\n    });\n\n    this.DadosPaginados.Itens = itensPagina.filter(item => item.Pagina == this.DadosPaginados.Pagina).map(item => item.Item);\n  }\n\n  exibirModalExcluir(Cartao: Cartao) {\n    this.CartaoAcao = Cartao\n    document.getElementById('modalExcluirCartao')!.style.display = 'block';\n  }\n\n  receiveMessage($event: DadosPaginador) {\n    this.DadosPaginador = $event\n    this.paginarCartoes();\n  }\n\n}\n","<div class=\"container main\">\n  <div class=\"titulo-pagina ff-verdana\">\n    <h1>Cartões</h1>\n  </div>\n  <div class=\"menu-painel conteudo-pagina\">\n    <div class=\"row\">\n      <div class=\"col col-flexible\">\n        <div class=\"input-group\">\n          <input type=\"text\" class=\"form-control\" placeholder=\"Buscar\" name=\"Busca\" id=\"txtBusca\" (keydown.enter)=\"buscarCartoes()\" (keydown.return)=\"buscarCartoes()\">\n          <span>\n            <button title=\"Buscar\" id=\"btnBuscar\" class=\"btn\" (click)=\"buscarCartoes()\">\n              <img src=\"../../../../assets/img/lupa-icon.png\">\n            </button>\n          </span>\n        </div>\n      </div>\n      <div class=\"col col-flexible\">\n        <button title=\"Novo Cartão\" id=\"btnNovoCartao\" class=\"btn\" routerLink=\"incluir-cartao\">\n          <img src=\"../../../../assets/img/plus-icon.png\">\n        </button>\n      </div>\n    </div>\n  </div>\n  <div class=\"conteudo-pagina div-tabela\">\n    <table class=\"table ff-verdana\">\n      <tr>\n        <th (click)=\"ordenarCartoes('Acoes')\" id=\"thAcoes\" class=\"campo-ordenacao\">\n          <div class=\"titulo-tabela\">\n            <span class=\"nome-campo\">Ações</span>\n            <span class=\"img-ordenacao\" id=\"imgAcoes\"></span>\n          </div>\n        </th>\n        <th (click)=\"ordenarCartoes('Nome')\" id=\"thNome\" class=\"campo-ordenacao\">\n          <div class=\"titulo-tabela\">\n            <span class=\"nome-campo\">Nome</span>\n            <span class=\"img-ordenacao\" id=\"imgNome\"></span>\n          </div>\n        </th>\n        <th (click)=\"ordenarCartoes('DiaVencimento')\" id=\"thDiaVencimento\" class=\"campo-ordenacao\">\n          <div class=\"titulo-tabela\">\n            <span class=\"nome-campo\">Dia Vencimento</span>\n            <span class=\"img-ordenacao\" id=\"imgDiaVencimento\"></span>\n          </div>\n        </th>\n        <th (click)=\"ordenarCartoes('DiaFechamento')\" id=\"thDiaFechamento\" class=\"campo-ordenacao\">\n          <div class=\"titulo-tabela\">\n            <span class=\"nome-campo\">Dia Fechamento</span>\n            <span class=\"img-ordenacao\" id=\"imgDiaFechamento\"></span>\n          </div>\n        </th>\n      </tr>\n      <tr *ngFor=\"let cartao of DadosPaginados.Itens\">\n        <td class=\"center\">\n          <div class=\"acoes\">\n            <span class=\"acoes-item\">\n              <button title=\"Editar\" id=\"btnEditar{{cartao.Id}}\" class=\"btn btn-sm\" routerLink=\"editar-cartao/{{cartao.Id}}\">\n                <img src=\"../../../../assets/img/pencil-icon.png\">\n              </button>\n            </span>\n            <span class=\"acoes-item\">\n              <button title=\"Faturas\" id=\"btnFaturas{{cartao.Id}}\" class=\"btn btn-sm\" routerLink=\"faturas-cartao/{{cartao.Id}}\">\n                <img src=\"../../../../assets/img/fatura-icon.png\">\n              </button>\n            </span>\n            <span class=\"acoes-item\">\n              <button title=\"Excluir\" id=\"btnExcluir{{cartao.Id}}\" class=\"btn btn-sm\" (click)=\"exibirModalExcluir(cartao)\">\n                <img src=\"../../../../assets/img/lixeira-icon.png\">\n              </button>\n            </span>\n          </div>\n        </td>\n        <td>{{cartao.Nome}}</td>\n        <td class=\"center\">{{cartao.DiaVencimento}}</td>\n        <td class=\"center\">{{cartao.DiaFechamento}}</td>\n      </tr>\n    </table>\n  </div>\n  <div class=\"paginador\">\n    <app-paginador [DadosPaginador]=\"DadosPaginador\" (messageEvent)=\"receiveMessage($event)\"></app-paginador>\n  </div>\n</div>\n<app-excluir-cartao [Cartao]=\"CartaoAcao\"></app-excluir-cartao>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}