{"ast":null,"code":"import { CartaoMapper } from 'src/app/mappers/financas/CartaoMapper';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/Financas/cartao/cartao.service\";\nimport * as i2 from \"src/app/services/validacao.service\";\nimport * as i3 from \"src/app/services/resposta-api.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"../assinaturas/assinaturas.component\";\nimport * as i7 from \"../compras/compras.component\";\nexport class EditarCartaoComponent {\n  constructor(cartaoService, validacaoService, respostaApiService, router, ActivatedRoute) {\n    this.cartaoService = cartaoService;\n    this.validacaoService = validacaoService;\n    this.respostaApiService = respostaApiService;\n    this.router = router;\n    this.ActivatedRoute = ActivatedRoute;\n    this.Cartao = {};\n    this.Id = \"\";\n  }\n  ngOnInit() {\n    this.Id = this.ActivatedRoute.snapshot.paramMap.get('id');\n    this.cartaoService.buscarPorId(this.Id).subscribe({\n      next: respostaApi => {\n        this.Cartao = CartaoMapper.CartaoDtoToCartao(respostaApi.valor);\n      },\n      error: err => {\n        this.respostaApiService.tratarRespostaApi(err);\n        this.router.navigate(['/cartoes']);\n      }\n    });\n  }\n  salvarCartao() {\n    if (!this.validarCamposObrigatorios(true)) {\n      return;\n    }\n    let CreateCartaoDto = CartaoMapper.CartaoToCreateCartaoDto(this.Cartao);\n    this.cartaoService.atualizar(this.Id, CreateCartaoDto).subscribe({\n      next: result => {\n        this.respostaApiService.tratarRespostaApi(result);\n        this.router.navigate(['/cartoes']);\n      },\n      error: err => {\n        this.respostaApiService.tratarRespostaApi(err);\n      }\n    });\n  }\n  cancelar() {\n    this.router.navigate(['/cartoes']);\n  }\n  //#region Validações\n  validarCamposObrigatorios(variavel) {\n    let erros = 0;\n    let camposObrigatorios = ['txtNome', 'txtDiaVencimento', 'txtDiaFechamento'];\n    camposObrigatorios.forEach(campo => {\n      if (!this.campoObrigatorio(campo)) {\n        erros++;\n      }\n    });\n    return erros == 0 ? true : false;\n  }\n  campoObrigatorio(campoId) {\n    let campo = document.getElementById(campoId);\n    let campoErro = document.getElementById('erro_' + campoId);\n    if (campo.value === \"\" || campo.value == null || campo.value == undefined || campo.tagName == 'SELECT' && campo.value == '0') {\n      campo.classList.add('campo-obrigatorio');\n      campoErro.style.display = 'block';\n      campoErro.innerHTML = \"Campo obrigatório\";\n      return false;\n    } else {\n      campoErro.style.display = 'none';\n      campo.classList.remove('campo-obrigatorio');\n      return true;\n    }\n  }\n  apenasNumeros(event) {\n    if (!this.validacaoService.apenasNumeros(event)) {\n      event.preventDefault();\n    }\n  }\n  static #_ = this.ɵfac = function EditarCartaoComponent_Factory(t) {\n    return new (t || EditarCartaoComponent)(i0.ɵɵdirectiveInject(i1.CartaoService), i0.ɵɵdirectiveInject(i2.ValidacaoService), i0.ɵɵdirectiveInject(i3.RespostaApiService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EditarCartaoComponent,\n    selectors: [[\"app-editar-cartao\"]],\n    decls: 41,\n    vars: 5,\n    consts: [[1, \"container\", \"main\", \"ff-verdana\"], [1, \"titulo-pagina\", \"ff-verdana\"], [1, \"form\", \"conteudo-pagina\", 3, \"ngSubmit\", \"keydown.enter\"], [1, \"row\"], [1, \"col-4\"], [1, \"form-group\"], [\"for\", \"nome\"], [\"type\", \"text\", \"id\", \"txtNome\", \"name\", \"Nome\", \"placeholder\", \"Nome\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"ngModelChange\"], [\"id\", \"erro_txtNome\", 1, \"form-validation\"], [\"type\", \"text\", \"id\", \"txtDiaVencimento\", \"name\", \"DiaVencimento\", \"placeholder\", \"Dia vencimento\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"keypress\", \"paste\", \"ngModelChange\"], [\"id\", \"erro_txtDiaVencimento\", 1, \"form-validation\"], [\"type\", \"text\", \"id\", \"txtDiaFechamento\", \"name\", \"DiaFechamento\", \"placeholder\", \"Dia fechamento\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"keypress\", \"paste\", \"ngModelChange\"], [\"id\", \"erro_txtDiaFechamento\", 1, \"form-validation\"], [1, \"container-assinaturas\"], [1, \"detalhe-cartao\"], [3, \"Cartao\", \"CartaoChange\"], [1, \"container-compras\"], [1, \"col-12\"], [\"type\", \"submit\", \"id\", \"btnSumbit\", \"title\", \"Salvar\", 1, \"btn\"], [\"type\", \"button\", \"id\", \"btnCancelar\", \"title\", \"Cancelar\", 1, \"btn\", \"btn-red\", 3, \"click\"]],\n    template: function EditarCartaoComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n        i0.ɵɵtext(3, \"Editar Cart\\u00E3o\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"form\", 2);\n        i0.ɵɵlistener(\"ngSubmit\", function EditarCartaoComponent_Template_form_ngSubmit_4_listener() {\n          return ctx.salvarCartao();\n        })(\"keydown.enter\", function EditarCartaoComponent_Template_form_keydown_enter_4_listener($event) {\n          return $event.preventDefault();\n        });\n        i0.ɵɵelementStart(5, \"div\", 3)(6, \"div\", 4)(7, \"div\", 5)(8, \"label\", 6);\n        i0.ɵɵtext(9, \"Nome\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"input\", 7);\n        i0.ɵɵlistener(\"focusout\", function EditarCartaoComponent_Template_input_focusout_10_listener() {\n          return ctx.campoObrigatorio(\"txtNome\");\n        })(\"ngModelChange\", function EditarCartaoComponent_Template_input_ngModelChange_10_listener($event) {\n          return ctx.Cartao.Nome = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"label\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 4)(13, \"div\", 5)(14, \"label\", 6);\n        i0.ɵɵtext(15, \"Dia vencimento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"input\", 9);\n        i0.ɵɵlistener(\"focusout\", function EditarCartaoComponent_Template_input_focusout_16_listener() {\n          return ctx.campoObrigatorio(\"txtDiaVencimento\");\n        })(\"keypress\", function EditarCartaoComponent_Template_input_keypress_16_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"paste\", function EditarCartaoComponent_Template_input_paste_16_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"ngModelChange\", function EditarCartaoComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.Cartao.DiaVencimento = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"label\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"div\", 4)(19, \"div\", 5)(20, \"label\", 6);\n        i0.ɵɵtext(21, \"Dia fechamento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"input\", 11);\n        i0.ɵɵlistener(\"focusout\", function EditarCartaoComponent_Template_input_focusout_22_listener() {\n          return ctx.campoObrigatorio(\"txtDiaFechamento\");\n        })(\"keypress\", function EditarCartaoComponent_Template_input_keypress_22_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"paste\", function EditarCartaoComponent_Template_input_paste_22_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"ngModelChange\", function EditarCartaoComponent_Template_input_ngModelChange_22_listener($event) {\n          return ctx.Cartao.DiaFechamento = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"label\", 12);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(24, \"div\", 13)(25, \"label\");\n        i0.ɵɵtext(26, \"Assinaturas\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 14)(28, \"app-assinaturas\", 15);\n        i0.ɵɵlistener(\"CartaoChange\", function EditarCartaoComponent_Template_app_assinaturas_CartaoChange_28_listener($event) {\n          return ctx.Cartao = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(29, \"div\", 16)(30, \"label\");\n        i0.ɵɵtext(31, \"Compras\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 14)(33, \"app-compras\", 15);\n        i0.ɵɵlistener(\"CartaoChange\", function EditarCartaoComponent_Template_app_compras_CartaoChange_33_listener($event) {\n          return ctx.Cartao = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(34, \"div\", 3)(35, \"div\", 17)(36, \"div\", 5)(37, \"button\", 18);\n        i0.ɵɵtext(38, \"Salvar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"button\", 19);\n        i0.ɵɵlistener(\"click\", function EditarCartaoComponent_Template_button_click_39_listener() {\n          return ctx.cancelar();\n        });\n        i0.ɵɵtext(40, \"Cancelar\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngModel\", ctx.Cartao.Nome);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.Cartao.DiaVencimento);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.Cartao.DiaFechamento);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"Cartao\", ctx.Cartao);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"Cartao\", ctx.Cartao);\n      }\n    },\n    dependencies: [i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgModel, i5.NgForm, i6.AssinaturasComponent, i7.ComprasComponent],\n    styles: [\".detalhe-cartao[_ngcontent-%COMP%] {\\r\\n  margin: 0.2rem 1rem 1rem 1rem;\\r\\n  border: 1px solid #333;\\r\\n  border-radius: 0.5rem;\\r\\n  box-shadow: 2px 2px 5px 0 rgba(0, 0, 0, 0.4);\\r\\n  overflow-y: auto;\\r\\n}\\r\\n.container-assinaturas[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .container-compras[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\r\\n  margin-left: 1.375rem;\\r\\n  font-size: 0.875rem;\\r\\n}\\r\\n@media (max-width: 700px) {\\r\\n  .form[_ngcontent-%COMP%]    > .row[_ngcontent-%COMP%] {\\r\\n    max-width: calc(100vw - 10%);\\r\\n  }\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9maW5hbmNhcy9jYXJ0b2VzL2VkaXRhci1jYXJ0YW8vZWRpdGFyLWNhcnRhby5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsNkJBQTZCO0VBQzdCLHNCQUFzQjtFQUN0QixxQkFBcUI7RUFDckIsNENBQTRDO0VBQzVDLGdCQUFnQjtBQUNsQjtBQUNBOztFQUVFLHFCQUFxQjtFQUNyQixtQkFBbUI7QUFDckI7QUFDQTtFQUNFO0lBQ0UsNEJBQTRCO0VBQzlCO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIuZGV0YWxoZS1jYXJ0YW8ge1xyXG4gIG1hcmdpbjogMC4ycmVtIDFyZW0gMXJlbSAxcmVtO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICMzMzM7XHJcbiAgYm9yZGVyLXJhZGl1czogMC41cmVtO1xyXG4gIGJveC1zaGFkb3c6IDJweCAycHggNXB4IDAgcmdiYSgwLCAwLCAwLCAwLjQpO1xyXG4gIG92ZXJmbG93LXk6IGF1dG87XHJcbn1cclxuLmNvbnRhaW5lci1hc3NpbmF0dXJhcyBsYWJlbCxcclxuLmNvbnRhaW5lci1jb21wcmFzIGxhYmVsIHtcclxuICBtYXJnaW4tbGVmdDogMS4zNzVyZW07XHJcbiAgZm9udC1zaXplOiAwLjg3NXJlbTtcclxufVxyXG5AbWVkaWEgKG1heC13aWR0aDogNzAwcHgpIHtcclxuICAuZm9ybSA+IC5yb3cge1xyXG4gICAgbWF4LXdpZHRoOiBjYWxjKDEwMHZ3IC0gMTAlKTtcclxuICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["CartaoMapper","EditarCartaoComponent","constructor","cartaoService","validacaoService","respostaApiService","router","ActivatedRoute","ngOnInit","Id","snapshot","paramMap","get","buscarPorId","subscribe","next","respostaApi","Cartao","CartaoDtoToCartao","valor","error","err","tratarRespostaApi","navigate","salvarCartao","validarCamposObrigatorios","CreateCartaoDto","CartaoToCreateCartaoDto","atualizar","result","cancelar","variavel","erros","camposObrigatorios","forEach","campo","campoObrigatorio","campoId","document","getElementById","campoErro","value","undefined","tagName","classList","add","style","display","innerHTML","remove","apenasNumeros","event","preventDefault","selectors","decls","vars","consts","template","i0","ctx","$event"],"sourceRoot":"","sources":["D:\\GIT\\HomeTools\\003-Frontend\\HomeTools.Front\\src\\app\\components\\financas\\cartoes\\editar-cartao\\editar-cartao.component.ts","D:\\GIT\\HomeTools\\003-Frontend\\HomeTools.Front\\src\\app\\components\\financas\\cartoes\\editar-cartao\\editar-cartao.component.html"],"sourcesContent":["import { Cartao } from 'src/app/interfaces/financas/Cartao';\nimport { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { CartaoMapper } from 'src/app/mappers/financas/CartaoMapper';\nimport { CartaoService } from 'src/app/services/Financas/cartao/cartao.service';\nimport { RespostaApiService } from 'src/app/services/resposta-api.service';\nimport { ValidacaoService } from 'src/app/services/validacao.service';\n\n@Component({\n  selector: 'app-editar-cartao',\n  templateUrl: './editar-cartao.component.html',\n  styleUrls: ['./editar-cartao.component.css']\n})\nexport class EditarCartaoComponent implements OnInit {\n\n  Cartao: Cartao = {} as Cartao;\n  Id: string | null = \"\";\n\n  constructor(\n    private cartaoService: CartaoService,\n    private validacaoService: ValidacaoService,\n    private respostaApiService: RespostaApiService,\n    private router: Router,\n    private ActivatedRoute: ActivatedRoute\n  ) { }\n\n  ngOnInit(): void {\n    this.Id = this.ActivatedRoute.snapshot.paramMap.get('id');\n    this.cartaoService.buscarPorId(this.Id!).subscribe({\n      next: (respostaApi) => {\n      this.Cartao = CartaoMapper.CartaoDtoToCartao(respostaApi.valor);\n      },\n      error: (err) => {\n        this.respostaApiService.tratarRespostaApi(err);\n        this.router.navigate(['/cartoes']);\n      }\n    });\n  }\n\n  salvarCartao() {\n    if (!this.validarCamposObrigatorios(true)) {\n      return;\n    }\n    let CreateCartaoDto = CartaoMapper.CartaoToCreateCartaoDto(this.Cartao);\n    this.cartaoService.atualizar(this.Id!, CreateCartaoDto).subscribe({\n      next: (result) => {\n        this.respostaApiService.tratarRespostaApi(result);\n        this.router.navigate(['/cartoes']);\n      },\n      error: (err) => {\n        this.respostaApiService.tratarRespostaApi(err);\n      }\n    });\n  }\n\n  cancelar() {\n    this.router.navigate(['/cartoes']);\n  }\n\n  //#region Validações\n\n  validarCamposObrigatorios(variavel: boolean): boolean {\n    let erros: number = 0;\n    let camposObrigatorios = ['txtNome', 'txtDiaVencimento', 'txtDiaFechamento'];\n    camposObrigatorios.forEach(campo => {\n      if (!this.campoObrigatorio(campo)) {\n        erros++;\n      }\n    });\n    return erros == 0 ? true : false;\n  }\n\n  campoObrigatorio(campoId: string): boolean {\n    let campo = <HTMLInputElement>document.getElementById(campoId)!;\n    let campoErro = document.getElementById('erro_' + campoId)!;\n    if (campo.value === \"\" || campo.value == null || campo.value == undefined || (campo.tagName == 'SELECT' && campo.value == '0')) {\n      campo.classList.add('campo-obrigatorio');\n      campoErro.style.display = 'block';\n      campoErro.innerHTML = \"Campo obrigatório\";\n      return false;\n    }\n    else {\n      campoErro.style.display = 'none';\n      campo.classList.remove('campo-obrigatorio');\n      return true;\n    }\n  }\n\n  apenasNumeros(event: any) {\n    if (!this.validacaoService.apenasNumeros(event)) {\n      event.preventDefault();\n    }\n  }\n\n  //#endregion\n\n}\n","<div class=\"container main ff-verdana\">\n  <div class=\"titulo-pagina ff-verdana\">\n    <h1>Editar Cartão</h1>\n  </div>\n  <form (ngSubmit)=\"salvarCartao()\" class=\"form conteudo-pagina\" (keydown.enter)=\"$event.preventDefault()\">\n    <div class=\"row\">\n      <div class=\"col-4\">\n        <div class=\"form-group\">\n          <label for=\"nome\">Nome</label>\n          <input type=\"text\" class=\"form-control\" id=\"txtNome\" name=\"Nome\" placeholder=\"Nome\"\n          (focusout)=\"campoObrigatorio('txtNome')\" [(ngModel)]=\"Cartao.Nome\">\n          <label class=\"form-validation\" id=\"erro_txtNome\"></label>\n        </div>\n      </div>\n      <div class=\"col-4\">\n        <div class=\"form-group\">\n          <label for=\"nome\">Dia vencimento</label>\n          <input type=\"text\" class=\"form-control\" id=\"txtDiaVencimento\" name=\"DiaVencimento\" placeholder=\"Dia vencimento\"\n          (focusout)=\"campoObrigatorio('txtDiaVencimento')\"\n          (keypress)=\"apenasNumeros($event)\" (paste)=\"apenasNumeros($event)\" [(ngModel)]=\"Cartao.DiaVencimento\">\n          <label class=\"form-validation\" id=\"erro_txtDiaVencimento\"></label>\n        </div>\n      </div>\n      <div class=\"col-4\">\n        <div class=\"form-group\">\n          <label for=\"nome\">Dia fechamento</label>\n          <input type=\"text\" class=\"form-control\" id=\"txtDiaFechamento\" name=\"DiaFechamento\" placeholder=\"Dia fechamento\"\n          (focusout)=\"campoObrigatorio('txtDiaFechamento')\"\n          (keypress)=\"apenasNumeros($event)\" (paste)=\"apenasNumeros($event)\" [(ngModel)]=\"Cartao.DiaFechamento\">\n          <label class=\"form-validation\" id=\"erro_txtDiaFechamento\"></label>\n        </div>\n      </div>\n    </div>\n    <div class=\"container-assinaturas\">\n      <label>Assinaturas</label>\n      <div class=\"detalhe-cartao\">\n        <app-assinaturas [(Cartao)]=\"Cartao\"></app-assinaturas>\n      </div>\n    </div>\n    <div class=\"container-compras\">\n      <label>Compras</label>\n      <div class=\"detalhe-cartao\">\n        <app-compras [(Cartao)]=\"Cartao\"></app-compras>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <div class=\"form-group\">\n          <button type=\"submit\" id=\"btnSumbit\" title=\"Salvar\" class=\"btn\">Salvar</button>\n          <button type=\"button\" id=\"btnCancelar\" title=\"Cancelar\" class=\"btn btn-red\" (click)=\"cancelar()\">Cancelar</button>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}