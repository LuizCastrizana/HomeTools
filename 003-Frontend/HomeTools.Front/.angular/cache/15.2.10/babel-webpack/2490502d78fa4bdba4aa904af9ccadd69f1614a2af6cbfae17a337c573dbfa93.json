{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/Financas/despesa.service\";\nimport * as i2 from \"src/app/services/categoria.service\";\nimport * as i3 from \"src/app/services/validacao.service\";\nimport * as i4 from \"src/app/services/resposta-api.service\";\nimport * as i5 from \"src/app/mappers/financas/DespesaMapper\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/forms\";\nfunction EditarDespesaComponent_option_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const categoria_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", categoria_r1.Id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(categoria_r1.Descricao);\n  }\n}\nexport class EditarDespesaComponent {\n  constructor(despesaService, categoriaService, validacaoService, respostaApiService, despesaMapper, router, route) {\n    this.despesaService = despesaService;\n    this.categoriaService = categoriaService;\n    this.validacaoService = validacaoService;\n    this.respostaApiService = respostaApiService;\n    this.despesaMapper = despesaMapper;\n    this.router = router;\n    this.route = route;\n    this.Despesa = {};\n    this.Categorias = {};\n  }\n  ngOnInit() {\n    const id = this.route.snapshot.paramMap.get('id');\n    this.Despesa.Categoria = {\n      Id: 0,\n      Descricao: ''\n    };\n    this.categoriaService.listar().subscribe({\n      next: result => {\n        this.Categorias = result.valor;\n      },\n      error: err => {\n        this.respostaApiService.tratarRespostaApi(err);\n        this.router.navigate(['/despesas']);\n      }\n    });\n    if (id != null) {\n      this.despesaService.buscarPorId(id).subscribe({\n        next: result => {\n          this.Despesa = result.valor;\n        },\n        error: err => {\n          this.respostaApiService.tratarRespostaApi(err);\n          this.router.navigate(['/despesas']);\n        }\n      });\n    }\n  }\n  salvarDespesa() {\n    if (!this.validarCamposObrigatorios()) {\n      return;\n    }\n    this.despesaService.atualizar(this.Despesa.Id.toString(), this.despesaMapper.ReadDtoToUpdateDto(this.Despesa)).subscribe({\n      next: result => {\n        this.respostaApiService.tratarRespostaApi(result);\n        this.router.navigate(['/despesas']);\n      },\n      error: err => {\n        this.respostaApiService.tratarRespostaApi(err);\n      }\n    });\n  }\n  cancelar() {\n    this.router.navigate(['/despesas']);\n  }\n  //#region Validações\n  validarCamposObrigatorios() {\n    let erros = 0;\n    let camposObrigatorios = ['txtDescricao', 'txtDataDespesa', 'selCategoriaId', 'txtValorInteiro', 'txtValorCentavos', 'txtQtdParcelas'];\n    camposObrigatorios.forEach(campo => {\n      if (!this.campoObrigatorio(campo)) {\n        erros++;\n      }\n    });\n    return erros == 0 ? true : false;\n  }\n  campoObrigatorio(campoId) {\n    let campo = document.getElementById(campoId);\n    let campoErro = document.getElementById('erro_' + campoId);\n    if (campo.value === \"\" || campo.value == null || campo.value == undefined || campo.tagName == 'SELECT' && campo.value == '0') {\n      campo.classList.add('campo-obrigatorio');\n      campoErro.style.display = 'block';\n      campoErro.innerHTML = \"Campo obrigatório\";\n      return false;\n    } else {\n      campoErro.style.display = 'none';\n      campo.classList.remove('campo-obrigatorio');\n      return true;\n    }\n  }\n  apenasNumerosPositivos(event) {\n    if (!this.validacaoService.apenasNumerosPositivos(event)) {\n      event.preventDefault();\n    }\n  }\n  apenasNumeros(event) {\n    if (!this.validacaoService.apenasNumeros(event)) {\n      event.preventDefault();\n    }\n  }\n  static #_ = this.ɵfac = function EditarDespesaComponent_Factory(t) {\n    return new (t || EditarDespesaComponent)(i0.ɵɵdirectiveInject(i1.DespesaService), i0.ɵɵdirectiveInject(i2.CategoriaService), i0.ɵɵdirectiveInject(i3.ValidacaoService), i0.ɵɵdirectiveInject(i4.RespostaApiService), i0.ɵɵdirectiveInject(i5.DespesaMapper), i0.ɵɵdirectiveInject(i6.Router), i0.ɵɵdirectiveInject(i6.ActivatedRoute));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EditarDespesaComponent,\n    selectors: [[\"app-editar-despesa\"]],\n    decls: 54,\n    vars: 10,\n    consts: [[1, \"container\", \"main\", \"ff-verdana\"], [1, \"titulo-pagina\", \"ff-verdana\"], [1, \"form\", \"conteudo-pagina\", 3, \"ngSubmit\"], [1, \"row\"], [1, \"col-4\"], [1, \"form-group\"], [\"for\", \"descricao\"], [\"type\", \"text\", \"id\", \"txtDescricao\", \"placeholder\", \"Descri\\u00E7\\u00E3o\", \"name\", \"Descricao\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"ngModelChange\"], [\"id\", \"erro_txtDescricao\", 1, \"form-validation\"], [\"for\", \"txtDataDespesa\"], [\"type\", \"date\", \"id\", \"txtDataDespesa\", \"placeholder\", \"Data\", \"name\", \"Data\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"keypress\", \"paste\", \"ngModelChange\"], [\"id\", \"erro_txtDataDespesa\", 1, \"form-validation\"], [\"for\", \"selCategoriaId\"], [\"name\", \"CategoriaId\", \"id\", \"selCategoriaId\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"ngModelChange\"], [\"value\", \"0\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"erro_selCategoriaId\", 1, \"form-validation\"], [\"id\", \"divValor\", 1, \"row\"], [\"for\", \"txtValorInteiro\"], [\"type\", \"text\", \"id\", \"txtValorInteiro\", \"placeholder\", \"Valor\", \"name\", \"ValorInteiro\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"keypress\", \"paste\", \"ngModelChange\"], [\"id\", \"erro_txtValorInteiro\", 1, \"form-validation\"], [\"for\", \"txtValorCentavos\"], [\"type\", \"text\", \"id\", \"txtValorCentavos\", \"placeholder\", \"Valor Centavos\", \"name\", \"ValorCentavos\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"keypress\", \"paste\", \"ngModelChange\"], [\"id\", \"erro_txtValorCentavos\", 1, \"form-validation\"], [\"for\", \"txtQtdParcelas\"], [\"type\", \"number\", \"min\", \"1\", \"step\", \"1\", \"id\", \"txtQtdParcelas\", \"placeholder\", \"Qtd. Parcelas\", \"name\", \"Parcelas\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"keypress\", \"paste\", \"ngModelChange\"], [\"id\", \"erro_txtQtdParcelas\", 1, \"form-validation\"], [1, \"col-12\"], [\"type\", \"submit\", \"id\", \"btnSumbit\", \"title\", \"Salvar\", 1, \"btn\"], [\"type\", \"button\", \"id\", \"btnCancelar\", \"title\", \"Cancelar\", 1, \"btn\", \"btn-red\", 3, \"click\"], [3, \"value\"]],\n    template: function EditarDespesaComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n        i0.ɵɵtext(3, \"Editar Despesa\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"form\", 2);\n        i0.ɵɵlistener(\"ngSubmit\", function EditarDespesaComponent_Template_form_ngSubmit_4_listener() {\n          return ctx.salvarDespesa();\n        });\n        i0.ɵɵelementStart(5, \"div\", 3)(6, \"div\", 4)(7, \"div\", 5)(8, \"label\", 6);\n        i0.ɵɵtext(9, \"Descri\\u00E7\\u00E3o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"input\", 7);\n        i0.ɵɵlistener(\"focusout\", function EditarDespesaComponent_Template_input_focusout_10_listener() {\n          return ctx.campoObrigatorio(\"txtDescricao\");\n        })(\"ngModelChange\", function EditarDespesaComponent_Template_input_ngModelChange_10_listener($event) {\n          return ctx.Despesa.Descricao = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"label\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 4)(13, \"div\", 5)(14, \"label\", 9);\n        i0.ɵɵtext(15, \"Data\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"input\", 10);\n        i0.ɵɵlistener(\"focusout\", function EditarDespesaComponent_Template_input_focusout_16_listener() {\n          return ctx.campoObrigatorio(\"txtDataDespesa\");\n        })(\"keypress\", function EditarDespesaComponent_Template_input_keypress_16_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"paste\", function EditarDespesaComponent_Template_input_paste_16_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"ngModelChange\", function EditarDespesaComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.Despesa.DataDespesa = $event;\n        });\n        i0.ɵɵpipe(17, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"label\", 11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"div\", 4)(20, \"div\", 5)(21, \"label\", 12);\n        i0.ɵɵtext(22, \"Categoria\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"select\", 13);\n        i0.ɵɵlistener(\"focusout\", function EditarDespesaComponent_Template_select_focusout_23_listener() {\n          return ctx.campoObrigatorio(\"selCategoriaId\");\n        })(\"ngModelChange\", function EditarDespesaComponent_Template_select_ngModelChange_23_listener($event) {\n          return ctx.Despesa.Categoria.Id = $event;\n        });\n        i0.ɵɵelementStart(24, \"option\", 14);\n        i0.ɵɵtext(25, \"Selecione...\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(26, EditarDespesaComponent_option_26_Template, 2, 2, \"option\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"label\", 16);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(28, \"div\", 17)(29, \"div\", 4)(30, \"div\", 5)(31, \"label\", 18);\n        i0.ɵɵtext(32, \"Valor inteiro\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"input\", 19);\n        i0.ɵɵlistener(\"focusout\", function EditarDespesaComponent_Template_input_focusout_33_listener() {\n          return ctx.campoObrigatorio(\"txtValorInteiro\");\n        })(\"keypress\", function EditarDespesaComponent_Template_input_keypress_33_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"paste\", function EditarDespesaComponent_Template_input_paste_33_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"ngModelChange\", function EditarDespesaComponent_Template_input_ngModelChange_33_listener($event) {\n          return ctx.Despesa.ValorInteiro = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(34, \"label\", 20);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(35, \"div\", 4)(36, \"div\", 5)(37, \"label\", 21);\n        i0.ɵɵtext(38, \"Valor centavos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"input\", 22);\n        i0.ɵɵlistener(\"focusout\", function EditarDespesaComponent_Template_input_focusout_39_listener() {\n          return ctx.campoObrigatorio(\"txtValorCentavos\");\n        })(\"keypress\", function EditarDespesaComponent_Template_input_keypress_39_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"paste\", function EditarDespesaComponent_Template_input_paste_39_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"ngModelChange\", function EditarDespesaComponent_Template_input_ngModelChange_39_listener($event) {\n          return ctx.Despesa.ValorCentavos = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(40, \"label\", 23);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(41, \"div\", 4)(42, \"div\", 5)(43, \"label\", 24);\n        i0.ɵɵtext(44, \"Qtd. Parcelas\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"input\", 25);\n        i0.ɵɵlistener(\"focusout\", function EditarDespesaComponent_Template_input_focusout_45_listener() {\n          return ctx.campoObrigatorio(\"txtQtdParcelas\");\n        })(\"keypress\", function EditarDespesaComponent_Template_input_keypress_45_listener($event) {\n          return ctx.apenasNumerosPositivos($event);\n        })(\"paste\", function EditarDespesaComponent_Template_input_paste_45_listener($event) {\n          return ctx.apenasNumerosPositivos($event);\n        })(\"ngModelChange\", function EditarDespesaComponent_Template_input_ngModelChange_45_listener($event) {\n          return ctx.Despesa.QtdParcelas = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(46, \"label\", 26);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(47, \"div\", 3)(48, \"div\", 27)(49, \"div\", 5)(50, \"button\", 28);\n        i0.ɵɵtext(51, \"Salvar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"button\", 29);\n        i0.ɵɵlistener(\"click\", function EditarDespesaComponent_Template_button_click_52_listener() {\n          return ctx.cancelar();\n        });\n        i0.ɵɵtext(53, \"Cancelar\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngModel\", ctx.Despesa.Descricao);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", i0.ɵɵpipeBind2(17, 7, ctx.Despesa.DataDespesa, \"yyyy-MM-dd\"));\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.Despesa.Categoria.Id);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.Categorias);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.Despesa.ValorInteiro);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.Despesa.ValorCentavos);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.Despesa.QtdParcelas);\n      }\n    },\n    dependencies: [i7.NgForOf, i8.ɵNgNoValidate, i8.NgSelectOption, i8.ɵNgSelectMultipleOption, i8.DefaultValueAccessor, i8.NumberValueAccessor, i8.SelectControlValueAccessor, i8.NgControlStatus, i8.NgControlStatusGroup, i8.MinValidator, i8.NgModel, i8.NgForm, i7.DatePipe],\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["i0","EditarDespesaComponent","constructor","despesaService","categoriaService","validacaoService","respostaApiService","despesaMapper","router","route","ngOnInit","id","snapshot","paramMap","get","Despesa","Categoria","Id","Descricao","listar","subscribe","next","result","Categorias","valor","error","err","tratarRespostaApi","navigate","buscarPorId","salvarDespesa","validarCamposObrigatorios","atualizar","toString","ReadDtoToUpdateDto","cancelar","erros","camposObrigatorios","forEach","campo","campoObrigatorio","campoId","document","getElementById","campoErro","value","undefined","tagName","classList","add","style","display","innerHTML","remove","apenasNumerosPositivos","event","preventDefault","apenasNumeros","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\GIT\\HomeTools\\003-Frontend\\HomeTools.Front\\src\\app\\components\\financas\\despesas\\editar-despesa\\editar-despesa.component.html","D:\\GIT\\HomeTools\\003-Frontend\\HomeTools.Front\\src\\app\\components\\financas\\despesas\\editar-despesa\\editar-despesa.component.ts"],"sourcesContent":["<div class=\"container main ff-verdana\">\n  <div class=\"titulo-pagina ff-verdana\">\n    <h1>Editar Despesa</h1>\n  </div>\n  <form (ngSubmit)=\"salvarDespesa()\" class=\"form conteudo-pagina\">\n    <div class=\"row\">\n      <div class=\"col-4\">\n        <div class=\"form-group\">\n          <label for=\"descricao\">Descrição</label>\n          <input type=\"text\" class=\"form-control\" id=\"txtDescricao\" placeholder=\"Descrição\" name=\"Descricao\"\n          (focusout)=\"campoObrigatorio('txtDescricao')\" [(ngModel)]=\"Despesa.Descricao\">\n          <label class=\"form-validation\" id=\"erro_txtDescricao\"></label>\n        </div>\n      </div>\n      <div class=\"col-4\">\n        <div class=\"form-group\">\n          <label for=\"txtDataDespesa\">Data</label>\n          <input type=\"date\" class=\"form-control\" id=\"txtDataDespesa\" placeholder=\"Data\" name=\"Data\"\n          (focusout)=\"campoObrigatorio('txtDataDespesa')\"\n          (keypress)=\"apenasNumeros($event)\" (paste)=\"apenasNumeros($event)\" [ngModel]=\"Despesa.DataDespesa | date: 'yyyy-MM-dd'\" (ngModelChange)=\"Despesa.DataDespesa = $event\">\n          <label class=\"form-validation\" id=\"erro_txtDataDespesa\"></label>\n        </div>\n      </div>\n      <div class=\"col-4\">\n        <div class=\"form-group\">\n          <label for=\"selCategoriaId\">Categoria</label>\n          <select name=\"CategoriaId\" id=\"selCategoriaId\" class=\"form-control\" (focusout)=\"campoObrigatorio('selCategoriaId')\" [(ngModel)]=\"Despesa.Categoria.Id\">\n            <option value=\"0\">Selecione...</option>\n            <option *ngFor=\"let categoria of Categorias\" [value]=\"categoria.Id\">{{ categoria.Descricao }}</option>\n          </select>\n          <label class=\"form-validation\" id=\"erro_selCategoriaId\"></label>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\" id=\"divValor\">\n      <div class=\"col-4\">\n        <div class=\"form-group\">\n          <label for=\"txtValorInteiro\">Valor inteiro</label>\n          <input type=\"text\" class=\"form-control\" id=\"txtValorInteiro\" placeholder=\"Valor\" name=\"ValorInteiro\"\n          (focusout)=\"campoObrigatorio('txtValorInteiro')\"\n          (keypress)=\"apenasNumeros($event)\" (paste)=\"apenasNumeros($event)\" [(ngModel)]=\"Despesa.ValorInteiro\">\n          <label class=\"form-validation\" id=\"erro_txtValorInteiro\"></label>\n        </div>\n      </div>\n      <div class=\"col-4\">\n        <div class=\"form-group\">\n          <label for=\"txtValorCentavos\">Valor centavos</label>\n          <input type=\"text\" class=\"form-control\" id=\"txtValorCentavos\" placeholder=\"Valor Centavos\" name=\"ValorCentavos\"\n          (focusout)=\"campoObrigatorio('txtValorCentavos')\"\n          (keypress)=\"apenasNumeros($event)\" (paste)=\"apenasNumeros($event)\" [(ngModel)]=\"Despesa.ValorCentavos\">\n          <label class=\"form-validation\" id=\"erro_txtValorCentavos\"></label>\n        </div>\n      </div>\n      <div class=\"col-4\">\n        <div class=\"form-group\">\n          <label for=\"txtQtdParcelas\">Qtd. Parcelas</label>\n          <input type=\"number\" min=\"1\" step=\"1\" class=\"form-control\" id=\"txtQtdParcelas\" placeholder=\"Qtd. Parcelas\" name=\"Parcelas\"\n          (focusout)=\"campoObrigatorio('txtQtdParcelas')\"\n          (keypress)=\"apenasNumerosPositivos($event)\" (paste)=\"apenasNumerosPositivos($event)\" [(ngModel)]=\"Despesa.QtdParcelas\">\n          <label class=\"form-validation\" id=\"erro_txtQtdParcelas\"></label>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <div class=\"form-group\">\n          <button type=\"submit\" id=\"btnSumbit\" title=\"Salvar\" class=\"btn\">Salvar</button>\n          <button type=\"button\" id=\"btnCancelar\" title=\"Cancelar\" class=\"btn btn-red\" (click)=\"cancelar()\">Cancelar</button>\n        </div>\n      </div>\n  </div>\n</form>\n\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ReadDespesaDto } from 'src/app/dto/financas/despesas/readDespesaDto';\nimport { Categoria } from 'src/app/interfaces/categoria';\nimport { DespesaMapper } from 'src/app/mappers/financas/DespesaMapper';\nimport { DespesaService } from 'src/app/services/Financas/despesa.service';\nimport { CategoriaService } from 'src/app/services/categoria.service';\nimport { RespostaApiService } from 'src/app/services/resposta-api.service';\nimport { ValidacaoService } from 'src/app/services/validacao.service';\n\n@Component({\n  selector: 'app-editar-despesa',\n  templateUrl: './editar-despesa.component.html',\n  styleUrls: ['./editar-despesa.component.css']\n})\nexport class EditarDespesaComponent implements OnInit {\n\n  Despesa: ReadDespesaDto = {} as ReadDespesaDto;\n  Categorias: Categoria[] = {} as Categoria[];\n\n  constructor(\n    private despesaService: DespesaService,\n    private categoriaService: CategoriaService,\n    private validacaoService: ValidacaoService,\n    private respostaApiService: RespostaApiService,\n    private despesaMapper: DespesaMapper,\n    private router: Router,\n    private route: ActivatedRoute\n    ) { }\n\n  ngOnInit(): void {\n    const id = this.route.snapshot.paramMap.get('id');\n\n    this.Despesa.Categoria = {\n      Id: 0,\n      Descricao: '',\n    } as Categoria;\n\n    this.categoriaService.listar().subscribe({\n      next: (result) => {\n        this.Categorias = result.valor;\n      },\n      error: (err) => {\n        this.respostaApiService.tratarRespostaApi(err);\n        this.router.navigate(['/despesas']);\n      }\n    });\n\n    if (id != null) {\n      this.despesaService.buscarPorId(id).subscribe({\n        next: (result) => {\n          this.Despesa = result.valor;\n        },\n        error: (err) => {\n          this.respostaApiService.tratarRespostaApi(err);\n          this.router.navigate(['/despesas']);\n        }\n      });\n    }\n  }\n\n  salvarDespesa() {\n    if (!this.validarCamposObrigatorios()) {\n      return;\n    }\n    this.despesaService.atualizar(this.Despesa.Id.toString(), this.despesaMapper.ReadDtoToUpdateDto(this.Despesa)).subscribe({\n      next: (result) => {\n        this.respostaApiService.tratarRespostaApi(result);\n        this.router.navigate(['/despesas']);\n      },\n      error: (err) => {\n        this.respostaApiService.tratarRespostaApi(err);\n      }\n    });\n  }\n\n  cancelar() {\n    this.router.navigate(['/despesas']);\n  }\n\n  //#region Validações\n\n  validarCamposObrigatorios(): boolean {\n    let erros: number = 0;\n    let camposObrigatorios = ['txtDescricao', 'txtDataDespesa', 'selCategoriaId', 'txtValorInteiro', 'txtValorCentavos', 'txtQtdParcelas'];\n    camposObrigatorios.forEach(campo => {\n      if (!this.campoObrigatorio(campo)) {\n        erros++;\n      }\n    });\n    return erros == 0 ? true : false;\n  }\n\n  campoObrigatorio(campoId: string): boolean {\n    let campo = <HTMLInputElement>document.getElementById(campoId)!;\n    let campoErro = document.getElementById('erro_' + campoId)!;\n    if (campo.value === \"\" || campo.value == null || campo.value == undefined || (campo.tagName == 'SELECT' && campo.value == '0')) {\n      campo.classList.add('campo-obrigatorio');\n      campoErro.style.display = 'block';\n      campoErro.innerHTML = \"Campo obrigatório\";\n      return false;\n    }\n    else {\n      campoErro.style.display = 'none';\n      campo.classList.remove('campo-obrigatorio');\n      return true;\n    }\n  }\n\n  apenasNumerosPositivos(event: any) {\n    if (!this.validacaoService.apenasNumerosPositivos(event)) {\n      event.preventDefault();\n    }\n  }\n\n  apenasNumeros(event: any) {\n    if (!this.validacaoService.apenasNumeros(event)) {\n      event.preventDefault();\n    }\n  }\n\n  //#endregion\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}