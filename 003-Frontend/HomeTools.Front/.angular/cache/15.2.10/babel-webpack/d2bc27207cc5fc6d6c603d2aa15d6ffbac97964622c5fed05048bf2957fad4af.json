{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/validacao.service\";\nimport * as i2 from \"src/app/services/categoria.service\";\nimport * as i3 from \"src/app/services/resposta-api.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction ModalFormularioCompraComponent_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 36);\n    i0.ɵɵtext(1, \"Editar Compra\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ModalFormularioCompraComponent_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 36);\n    i0.ɵɵtext(1, \"Incluir Compra\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ModalFormularioCompraComponent_option_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const categoria_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", categoria_r3.Id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(categoria_r3.Descricao);\n  }\n}\nexport class ModalFormularioCompraComponent {\n  constructor(validacaoService, categoriaService, respostaApiService, router) {\n    this.validacaoService = validacaoService;\n    this.categoriaService = categoriaService;\n    this.respostaApiService = respostaApiService;\n    this.router = router;\n    this.Compra = {};\n    this.Edicao = false;\n    this.CartaoId = 0;\n    this.CompraChange = new EventEmitter();\n    this.EventoEdicao = new EventEmitter();\n    this.CategoriaId = 0;\n    this.Categorias = [];\n  }\n  ngOnInit() {\n    this.categoriaService.listar().subscribe({\n      next: result => {\n        this.Categorias = result.valor;\n      },\n      error: err => {\n        this.respostaApiService.tratarRespostaApi(err);\n        this.router.navigate(['/cartoes']);\n      }\n    });\n  }\n  ngOnChanges() {\n    if (this.Compra.Id > 0) {\n      this.CategoriaId = this.Compra.Categoria.Id;\n    } else {\n      this.CategoriaId = 0;\n    }\n  }\n  salvarDados() {\n    if (this.validarCamposObrigatorios()) {\n      this.Compra.Categoria = {\n        Id: this.CategoriaId,\n        Descricao: ''\n      };\n      this.Compra.CartaoId = this.CartaoId;\n      this.EventoEdicao.emit(this.Edicao);\n    }\n  }\n  fechar() {\n    this.router.navigateByUrl('/', {\n      skipLocationChange: true\n    }).then(() => {\n      this.router.navigate(['/cartoes/editar-cartao/' + this.CartaoId]);\n    });\n  }\n  //#region Validações\n  validarCamposObrigatorios() {\n    let erros = 0;\n    let camposObrigatorios = ['txtDescricaoCompra', 'txtDataCompra', 'txtValorInteiroCompra', 'txtValorCentavosCompra', 'txtQtdParcelasCompra', 'selCategoriaIdCompra'];\n    camposObrigatorios.forEach(campo => {\n      if (!this.campoObrigatorio(campo)) {\n        erros++;\n      }\n    });\n    return erros == 0 ? true : false;\n  }\n  campoObrigatorio(campoId) {\n    let campo = document.getElementById(campoId);\n    let campoErro = document.getElementById('erro_' + campoId);\n    if (campo.value === '' || campo.value == null || campo.value == undefined || campo.tagName == 'SELECT' && campo.value == '0') {\n      campo.classList.add('campo-obrigatorio');\n      campoErro.style.display = 'block';\n      campoErro.innerHTML = 'Campo obrigatório';\n      return false;\n    } else {\n      campoErro.style.display = 'none';\n      campo.classList.remove('campo-obrigatorio');\n      return true;\n    }\n  }\n  apenasNumerosPositivos(event) {\n    if (!this.validacaoService.apenasNumerosPositivos(event)) {\n      event.preventDefault();\n    }\n  }\n  apenasNumeros(event) {\n    if (!this.validacaoService.apenasNumeros(event)) {\n      event.preventDefault();\n    }\n  }\n  static #_ = this.ɵfac = function ModalFormularioCompraComponent_Factory(t) {\n    return new (t || ModalFormularioCompraComponent)(i0.ɵɵdirectiveInject(i1.ValidacaoService), i0.ɵɵdirectiveInject(i2.CategoriaService), i0.ɵɵdirectiveInject(i3.RespostaApiService), i0.ɵɵdirectiveInject(i4.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ModalFormularioCompraComponent,\n    selectors: [[\"app-modal-formulario-compra\"]],\n    inputs: {\n      Compra: \"Compra\",\n      Edicao: \"Edicao\",\n      CartaoId: \"CartaoId\"\n    },\n    outputs: {\n      CompraChange: \"CompraChange\",\n      EventoEdicao: \"EventoEdicao\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 59,\n    vars: 12,\n    consts: [[\"id\", \"modalFormularioCompra\", 1, \"form-compra-modal\", \"ff-verdana\"], [1, \"modal\"], [1, \"cabecalho-modal\"], [\"class\", \"texto\", 4, \"ngIf\"], [1, \"btn-fechar\", 3, \"click\"], [\"src\", \"../../../../assets/img/fechar-icon.png\"], [1, \"conteudo-modal\"], [1, \"form\", \"form-compra\", 3, \"ngSubmit\"], [1, \"row\"], [1, \"col-4\"], [1, \"form-group\"], [\"for\", \"txtDescricaoCompra\"], [\"type\", \"text\", \"id\", \"txtDescricaoCompra\", \"placeholder\", \"Descri\\u00E7\\u00E3o\", \"name\", \"Descricao\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"ngModelChange\"], [\"id\", \"erro_txtDescricaoCompra\", 1, \"form-validation\"], [\"for\", \"txtDataCompra\"], [\"type\", \"date\", \"id\", \"txtDataCompra\", \"placeholder\", \"Data\", \"name\", \"Data\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"keypress\", \"paste\", \"ngModelChange\"], [\"id\", \"erro_txtDataCompra\", 1, \"form-validation\"], [\"for\", \"selCategoriaIdCompra\"], [\"name\", \"CategoriaId\", \"id\", \"selCategoriaIdCompra\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"ngModelChange\"], [\"value\", \"0\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"erro_selCategoriaIdCompra\", 1, \"form-validation\"], [\"id\", \"divValor\", 1, \"row\"], [\"for\", \"txtValorInteiroCompra\"], [\"type\", \"text\", \"id\", \"txtValorInteiroCompra\", \"placeholder\", \"Valor\", \"name\", \"ValorInteiro\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"keypress\", \"paste\", \"ngModelChange\"], [\"id\", \"erro_txtValorInteiroCompra\", 1, \"form-validation\"], [\"for\", \"txtValorCentavosCompra\"], [\"type\", \"text\", \"id\", \"txtValorCentavosCompra\", \"placeholder\", \"Valor Centavos\", \"name\", \"ValorCentavos\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"keypress\", \"paste\", \"ngModelChange\"], [\"id\", \"erro_txtValorCentavosCompra\", 1, \"form-validation\"], [\"for\", \"txtQtdParcelasCompra\"], [\"type\", \"number\", \"min\", \"1\", \"step\", \"1\", \"id\", \"txtQtdParcelasCompra\", \"placeholder\", \"Qtd. Parcelas\", \"name\", \"Parcelas\", 1, \"form-control\", 3, \"ngModel\", \"focusout\", \"keypress\", \"paste\", \"ngModelChange\"], [\"id\", \"erro_txtQtdParcelasCompra\", 1, \"form-validation\"], [1, \"col-12\"], [\"type\", \"submit\", \"id\", \"btnSumbit\", \"title\", \"Salvar\", 1, \"btn\"], [\"type\", \"button\", \"id\", \"btnCancelar\", \"title\", \"Cancelar\", 1, \"btn\", \"btn-red\", 3, \"click\"], [1, \"overlay\"], [1, \"texto\"], [3, \"value\"]],\n    template: function ModalFormularioCompraComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵtemplate(3, ModalFormularioCompraComponent_span_3_Template, 2, 0, \"span\", 3);\n        i0.ɵɵtemplate(4, ModalFormularioCompraComponent_span_4_Template, 2, 0, \"span\", 3);\n        i0.ɵɵelementStart(5, \"span\", 4);\n        i0.ɵɵlistener(\"click\", function ModalFormularioCompraComponent_Template_span_click_5_listener() {\n          return ctx.fechar();\n        });\n        i0.ɵɵelement(6, \"img\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 6)(8, \"form\", 7);\n        i0.ɵɵlistener(\"ngSubmit\", function ModalFormularioCompraComponent_Template_form_ngSubmit_8_listener() {\n          return ctx.salvarDados();\n        });\n        i0.ɵɵelementStart(9, \"div\", 8)(10, \"div\", 9)(11, \"div\", 10)(12, \"label\", 11);\n        i0.ɵɵtext(13, \"Descri\\u00E7\\u00E3o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"input\", 12);\n        i0.ɵɵlistener(\"focusout\", function ModalFormularioCompraComponent_Template_input_focusout_14_listener() {\n          return ctx.campoObrigatorio(\"txtDescricaoCompra\");\n        })(\"ngModelChange\", function ModalFormularioCompraComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.Compra.Descricao = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"label\", 13);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 9)(17, \"div\", 10)(18, \"label\", 14);\n        i0.ɵɵtext(19, \"Data\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"input\", 15);\n        i0.ɵɵlistener(\"focusout\", function ModalFormularioCompraComponent_Template_input_focusout_20_listener() {\n          return ctx.campoObrigatorio(\"txtDataCompra\");\n        })(\"keypress\", function ModalFormularioCompraComponent_Template_input_keypress_20_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"paste\", function ModalFormularioCompraComponent_Template_input_paste_20_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"ngModelChange\", function ModalFormularioCompraComponent_Template_input_ngModelChange_20_listener($event) {\n          return ctx.Compra.DataCompra = $event;\n        });\n        i0.ɵɵpipe(21, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(22, \"label\", 16);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"div\", 9)(24, \"div\", 10)(25, \"label\", 17);\n        i0.ɵɵtext(26, \"Categoria\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"select\", 18);\n        i0.ɵɵlistener(\"focusout\", function ModalFormularioCompraComponent_Template_select_focusout_27_listener() {\n          return ctx.campoObrigatorio(\"selCategoriaIdCompra\");\n        })(\"ngModelChange\", function ModalFormularioCompraComponent_Template_select_ngModelChange_27_listener($event) {\n          return ctx.CategoriaId = $event;\n        });\n        i0.ɵɵelementStart(28, \"option\", 19);\n        i0.ɵɵtext(29, \"Selecione...\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(30, ModalFormularioCompraComponent_option_30_Template, 2, 2, \"option\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(31, \"label\", 21);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(32, \"div\", 22)(33, \"div\", 9)(34, \"div\", 10)(35, \"label\", 23);\n        i0.ɵɵtext(36, \"Valor inteiro\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"input\", 24);\n        i0.ɵɵlistener(\"focusout\", function ModalFormularioCompraComponent_Template_input_focusout_37_listener() {\n          return ctx.campoObrigatorio(\"txtValorInteiroCompra\");\n        })(\"keypress\", function ModalFormularioCompraComponent_Template_input_keypress_37_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"paste\", function ModalFormularioCompraComponent_Template_input_paste_37_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"ngModelChange\", function ModalFormularioCompraComponent_Template_input_ngModelChange_37_listener($event) {\n          return ctx.Compra.ValorInteiro = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(38, \"label\", 25);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(39, \"div\", 9)(40, \"div\", 10)(41, \"label\", 26);\n        i0.ɵɵtext(42, \"Valor centavos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"input\", 27);\n        i0.ɵɵlistener(\"focusout\", function ModalFormularioCompraComponent_Template_input_focusout_43_listener() {\n          return ctx.campoObrigatorio(\"txtValorCentavosCompra\");\n        })(\"keypress\", function ModalFormularioCompraComponent_Template_input_keypress_43_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"paste\", function ModalFormularioCompraComponent_Template_input_paste_43_listener($event) {\n          return ctx.apenasNumeros($event);\n        })(\"ngModelChange\", function ModalFormularioCompraComponent_Template_input_ngModelChange_43_listener($event) {\n          return ctx.Compra.ValorCentavos = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(44, \"label\", 28);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(45, \"div\", 9)(46, \"div\", 10)(47, \"label\", 29);\n        i0.ɵɵtext(48, \"Qtd. Parcelas\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"input\", 30);\n        i0.ɵɵlistener(\"focusout\", function ModalFormularioCompraComponent_Template_input_focusout_49_listener() {\n          return ctx.campoObrigatorio(\"txtQtdParcelasCompra\");\n        })(\"keypress\", function ModalFormularioCompraComponent_Template_input_keypress_49_listener($event) {\n          return ctx.apenasNumerosPositivos($event);\n        })(\"paste\", function ModalFormularioCompraComponent_Template_input_paste_49_listener($event) {\n          return ctx.apenasNumerosPositivos($event);\n        })(\"ngModelChange\", function ModalFormularioCompraComponent_Template_input_ngModelChange_49_listener($event) {\n          return ctx.Compra.QtdParcelas = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(50, \"label\", 31);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(51, \"div\", 8)(52, \"div\", 32)(53, \"div\", 10)(54, \"button\", 33);\n        i0.ɵɵtext(55, \"Salvar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(56, \"button\", 34);\n        i0.ɵɵlistener(\"click\", function ModalFormularioCompraComponent_Template_button_click_56_listener() {\n          return ctx.fechar();\n        });\n        i0.ɵɵtext(57, \"Cancelar\");\n        i0.ɵɵelementEnd()()()()()()();\n        i0.ɵɵelement(58, \"div\", 35);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.Edicao);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.Edicao);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngModel\", ctx.Compra.Descricao);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", i0.ɵɵpipeBind2(21, 9, ctx.Compra.DataCompra, \"yyyy-MM-dd\"));\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.CategoriaId);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.Categorias);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.Compra.ValorInteiro);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.Compra.ValorCentavos);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.Compra.QtdParcelas);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i6.ɵNgNoValidate, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.NumberValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.MinValidator, i6.NgModel, i6.NgForm, i5.DatePipe],\n    styles: [\".form-compra-modal[_ngcontent-%COMP%] {\\r\\n  display: none;\\r\\n}\\r\\n.modal[_ngcontent-%COMP%] {\\r\\n  width: 85%;\\r\\n  max-height: 85%;\\r\\n}\\r\\n.cabecalho-modal[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  align-items: center;\\r\\n}\\r\\n.btn-fechar[_ngcontent-%COMP%] {\\r\\n  width: 28px;\\r\\n  height: 28px;\\r\\n}\\r\\n.btn-fechar[_ngcontent-%COMP%]:hover {\\r\\n  cursor: pointer;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9maW5hbmNhcy9jYXJ0b2VzL2NvbXByYXMvbW9kYWwtZm9ybXVsYXJpby9tb2RhbC1mb3JtdWxhcmlvLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFhO0FBQ2Y7QUFDQTtFQUNFLFVBQVU7RUFDVixlQUFlO0FBQ2pCO0FBQ0E7RUFDRSxhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLG1CQUFtQjtBQUNyQjtBQUNBO0VBQ0UsV0FBVztFQUNYLFlBQVk7QUFDZDtBQUNBO0VBQ0UsZUFBZTtBQUNqQiIsInNvdXJjZXNDb250ZW50IjpbIi5mb3JtLWNvbXByYS1tb2RhbCB7XHJcbiAgZGlzcGxheTogbm9uZTtcclxufVxyXG4ubW9kYWwge1xyXG4gIHdpZHRoOiA4NSU7XHJcbiAgbWF4LWhlaWdodDogODUlO1xyXG59XHJcbi5jYWJlY2FsaG8tbW9kYWwge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuLmJ0bi1mZWNoYXIge1xyXG4gIHdpZHRoOiAyOHB4O1xyXG4gIGhlaWdodDogMjhweDtcclxufVxyXG4uYnRuLWZlY2hhcjpob3ZlciB7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["EventEmitter","i0","ModalFormularioCompraComponent","constructor","validacaoService","categoriaService","respostaApiService","router","ngOnInit","listar","subscribe","next","result","Categorias","valor","error","err","tratarRespostaApi","navigate","ngOnChanges","Compra","Id","CategoriaId","Categoria","salvarDados","validarCamposObrigatorios","Descricao","CartaoId","EventoEdicao","emit","Edicao","fechar","navigateByUrl","skipLocationChange","then","erros","camposObrigatorios","forEach","campo","campoObrigatorio","campoId","document","getElementById","campoErro","value","undefined","tagName","classList","add","style","display","innerHTML","remove","apenasNumerosPositivos","event","preventDefault","apenasNumeros","selectors","inputs","outputs","CompraChange","features","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\GIT\\HomeTools\\003-Frontend\\HomeTools.Front\\src\\app\\components\\financas\\cartoes\\compras\\modal-formulario\\modal-formulario.component.ts","D:\\GIT\\HomeTools\\003-Frontend\\HomeTools.Front\\src\\app\\components\\financas\\cartoes\\compras\\modal-formulario\\modal-formulario.component.html"],"sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Categoria } from 'src/app/interfaces/categoria';\nimport { Compra } from 'src/app/interfaces/financas/Compra';\nimport { CategoriaService } from 'src/app/services/categoria.service';\nimport { RespostaApiService } from 'src/app/services/resposta-api.service';\nimport { ValidacaoService } from 'src/app/services/validacao.service';\n\n@Component({\n  selector: 'app-modal-formulario-compra',\n  templateUrl: './modal-formulario.component.html',\n  styleUrls: ['./modal-formulario.component.css'],\n})\nexport class ModalFormularioCompraComponent implements OnInit {\n  @Input() Compra: Compra = {} as Compra;\n  @Input() Edicao: boolean = false;\n  @Input() CartaoId: number = 0;\n  @Output() CompraChange = new EventEmitter<Compra>();\n  @Output() EventoEdicao = new EventEmitter<boolean>();\n\n  CategoriaId: number = 0;\n  Categorias: Categoria[] = [];\n\n  constructor(\n    private validacaoService: ValidacaoService,\n    private categoriaService: CategoriaService,\n    private respostaApiService: RespostaApiService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.categoriaService.listar().subscribe({\n      next: (result) => {\n        this.Categorias = result.valor;\n      },\n      error: (err) => {\n        this.respostaApiService.tratarRespostaApi(err);\n        this.router.navigate(['/cartoes']);\n      },\n    });\n  }\n\n  ngOnChanges(): void {\n    if (this.Compra.Id > 0) {\n      this.CategoriaId = this.Compra.Categoria.Id;\n    } else {\n      this.CategoriaId = 0;\n    }\n  }\n\n  salvarDados() {\n    if (this.validarCamposObrigatorios()) {\n      this.Compra.Categoria = {\n        Id: this.CategoriaId,\n        Descricao: '',\n      } as Categoria;\n      this.Compra.CartaoId = this.CartaoId;\n      this.EventoEdicao.emit(this.Edicao);\n    }\n  }\n\n  fechar() {\n    this.router.navigateByUrl('/', { skipLocationChange: true }).then(() => {\n      this.router.navigate(['/cartoes/editar-cartao/' + this.CartaoId]);\n    });\n  }\n\n  //#region Validações\n\n  validarCamposObrigatorios(): boolean {\n    let erros: number = 0;\n    let camposObrigatorios = [\n      'txtDescricaoCompra',\n      'txtDataCompra',\n      'txtValorInteiroCompra',\n      'txtValorCentavosCompra',\n      'txtQtdParcelasCompra',\n      'selCategoriaIdCompra',\n    ];\n    camposObrigatorios.forEach((campo) => {\n      if (!this.campoObrigatorio(campo)) {\n        erros++;\n      }\n    });\n    return erros == 0 ? true : false;\n  }\n\n  campoObrigatorio(campoId: string): boolean {\n    let campo = <HTMLInputElement>document.getElementById(campoId)!;\n    let campoErro = document.getElementById('erro_' + campoId)!;\n    if (\n      campo.value === '' ||\n      campo.value == null ||\n      campo.value == undefined ||\n      (campo.tagName == 'SELECT' && campo.value == '0')\n    ) {\n      campo.classList.add('campo-obrigatorio');\n      campoErro.style.display = 'block';\n      campoErro.innerHTML = 'Campo obrigatório';\n      return false;\n    } else {\n      campoErro.style.display = 'none';\n      campo.classList.remove('campo-obrigatorio');\n      return true;\n    }\n  }\n\n  apenasNumerosPositivos(event: any) {\n    if (!this.validacaoService.apenasNumerosPositivos(event)) {\n      event.preventDefault();\n    }\n  }\n\n  apenasNumeros(event: any) {\n    if (!this.validacaoService.apenasNumeros(event)) {\n      event.preventDefault();\n    }\n  }\n\n  //#endregion\n}\n","<section class=\"form-compra-modal ff-verdana\" id=\"modalFormularioCompra\">\n  <div class=\"modal\">\n    <div class=\"cabecalho-modal\">\n      <span *ngIf=\"Edicao\" class=\"texto\">Editar Compra</span>\n      <span *ngIf=\"!Edicao\" class=\"texto\">Incluir Compra</span>\n      <span class=\"btn-fechar\" (click)=\"fechar()\"><img src=\"../../../../assets/img/fechar-icon.png\"></span>\n    </div>\n    <div class=\"conteudo-modal\">\n      <form (ngSubmit)=\"salvarDados()\" class=\"form form-compra\">\n        <div class=\"row\">\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"txtDescricaoCompra\">Descrição</label>\n              <input type=\"text\" class=\"form-control\" id=\"txtDescricaoCompra\" placeholder=\"Descrição\" name=\"Descricao\"\n              (focusout)=\"campoObrigatorio('txtDescricaoCompra')\" [(ngModel)]=\"Compra.Descricao\">\n              <label class=\"form-validation\" id=\"erro_txtDescricaoCompra\"></label>\n            </div>\n          </div>\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"txtDataCompra\">Data</label>\n              <input type=\"date\" class=\"form-control\" id=\"txtDataCompra\" placeholder=\"Data\" name=\"Data\"\n              (focusout)=\"campoObrigatorio('txtDataCompra')\"\n              (keypress)=\"apenasNumeros($event)\" (paste)=\"apenasNumeros($event)\" [ngModel]=\"Compra.DataCompra | date: 'yyyy-MM-dd'\" (ngModelChange)=\"Compra.DataCompra = $event\">\n              <label class=\"form-validation\" id=\"erro_txtDataCompra\"></label>\n            </div>\n          </div>\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"selCategoriaIdCompra\">Categoria</label>\n              <select name=\"CategoriaId\" id=\"selCategoriaIdCompra\" class=\"form-control\" (focusout)=\"campoObrigatorio('selCategoriaIdCompra')\" [(ngModel)]=\"CategoriaId\">\n                <option value=\"0\">Selecione...</option>\n                <option *ngFor=\"let categoria of Categorias\" [value]=\"categoria.Id\">{{ categoria.Descricao }}</option>\n              </select>\n              <label class=\"form-validation\" id=\"erro_selCategoriaIdCompra\"></label>\n            </div>\n          </div>\n        </div>\n        <div class=\"row\" id=\"divValor\">\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"txtValorInteiroCompra\">Valor inteiro</label>\n              <input type=\"text\" class=\"form-control\" id=\"txtValorInteiroCompra\" placeholder=\"Valor\" name=\"ValorInteiro\"\n              (focusout)=\"campoObrigatorio('txtValorInteiroCompra')\"\n              (keypress)=\"apenasNumeros($event)\" (paste)=\"apenasNumeros($event)\" [(ngModel)]=\"Compra.ValorInteiro\">\n              <label class=\"form-validation\" id=\"erro_txtValorInteiroCompra\"></label>\n            </div>\n          </div>\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"txtValorCentavosCompra\">Valor centavos</label>\n              <input type=\"text\" class=\"form-control\" id=\"txtValorCentavosCompra\" placeholder=\"Valor Centavos\" name=\"ValorCentavos\"\n              (focusout)=\"campoObrigatorio('txtValorCentavosCompra')\"\n              (keypress)=\"apenasNumeros($event)\" (paste)=\"apenasNumeros($event)\" [(ngModel)]=\"Compra.ValorCentavos\">\n              <label class=\"form-validation\" id=\"erro_txtValorCentavosCompra\"></label>\n            </div>\n          </div>\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"txtQtdParcelasCompra\">Qtd. Parcelas</label>\n              <input type=\"number\" min=\"1\" step=\"1\" class=\"form-control\" id=\"txtQtdParcelasCompra\" placeholder=\"Qtd. Parcelas\" name=\"Parcelas\"\n              (focusout)=\"campoObrigatorio('txtQtdParcelasCompra')\"\n              (keypress)=\"apenasNumerosPositivos($event)\" (paste)=\"apenasNumerosPositivos($event)\" [(ngModel)]=\"Compra.QtdParcelas\">\n              <label class=\"form-validation\" id=\"erro_txtQtdParcelasCompra\"></label>\n            </div>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col-12\">\n            <div class=\"form-group\">\n              <button type=\"submit\" id=\"btnSumbit\" title=\"Salvar\" class=\"btn\">Salvar</button>\n              <button type=\"button\" id=\"btnCancelar\" title=\"Cancelar\" class=\"btn btn-red\" (click)=\"fechar()\">Cancelar</button>\n            </div>\n          </div>\n      </div>\n      </form>\n    </div>\n  </div>\n  <div class=\"overlay\"></div>\n</section>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}